"use strict";(self["webpackChunkfunniecafe"]=self["webpackChunkfunniecafe"]||[]).push([[449],{2449:function(t,e,s){s.r(e),s.d(e,{default:function(){return B}});var a=s(6252),i=s(9963),r=s(3577);const o=(0,a._)("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[(0,a._)("h2",{class:"position-absolute text-center text-white fw-bolder"},"My Favorites")],-1),l={class:"mb-5"},n={class:"container"},c=(0,a._)("i",{class:"bi bi-arrow-left-square-fill fs-2"},null,-1),d=[c],u={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},p={class:"breadcrumb"},b={class:"breadcrumb-item"},h=(0,a._)("li",{class:"breadcrumb-item active","aria-current":"page"},"My Favorites",-1),m=(0,a._)("div",{class:"d-flex justify-content-center mt-5"},[(0,a._)("h1",{class:"fs-2 fw-bold text-primary"},"My Favorites")],-1),f={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},g={class:"col table-responsive mt-4 mb-4"},v={class:"table align-middle text-center table-light table-borderless"},_=(0,a._)("thead",{class:"table-secondary"},[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",{class:"text-nowrap"},"Product"),(0,a._)("th",{class:"text-nowrap ps-4"},"Price"),(0,a._)("th"),(0,a._)("th"),(0,a._)("th",{class:"text-end"})])],-1),y={class:"text-center"},w={class:"d-block favorite-table"},x={class:"text-nowrap fw-bold text-primary fs-5 ps-4 ps-lg-0"},k={class:"text-nowrap ps-4"},D={key:0,class:"h5 text-secondary"},F={key:1,class:"h6 text-secondary"},C={key:2,class:"h5 text-primary"},P={class:"text-nowrap text-end ps-4 ps-lg-0"},$=["disabled","onClick"],I={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},L=(0,a._)("span",{class:"visually-hidden"},"Loading...",-1),M=[L],N=(0,a._)("i",{class:"bi bi-cart-fill"},null,-1),S={class:"text-nowrap"},q=["onClick"],T=(0,a._)("i",{class:"bi bi-search"},null,-1),U=["disabled","onClick"],W=(0,a._)("i",{class:"bi bi-x-lg"},null,-1),j=[W],z={class:"text-end mt-4 mb-5"},H=(0,a._)("i",{class:"bi bi-cart-fill ps-1"},null,-1),O={key:1,class:"py-5 mb-5"},Y={class:"text-center pt-4"},Z=(0,a._)("h2",{class:"fw-bold mb-5"},"There are no items in favorites",-1);function J(t,e,s,c,L,W){const J=(0,a.up)("Navbar"),R=(0,a.up)("LoadingVue"),A=(0,a.up)("RouterLink"),G=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(J),(0,a.Wm)(R,{active:L.isLoading,loader:"bars",color:"#6c584c",width:70,height:70},null,8,["active"]),o,(0,a._)("section",l,[(0,a._)("div",n,[(0,a._)("a",{href:"#",title:"Previous",class:"text-black-50 hover-nav fw-bold",onClick:e[0]||(e[0]=(0,i.iM)((e=>t.$router.go(-1)),["prevent"]))},d),(0,a._)("nav",u,[(0,a._)("ol",p,[(0,a._)("li",b,[(0,a.Wm)(A,{to:"/",class:"text-dark hover-nav fw-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})]),h])]),0!==L.favoriteProduct.length?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[m,(0,a._)("div",f,[(0,a._)("div",g,[(0,a._)("table",v,[_,(0,a._)("tbody",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.favoriteProduct,(e=>((0,a.wg)(),(0,a.iD)("tr",{class:"table-nowrap",key:e.id},[(0,a._)("td",w,[(0,a._)("div",{class:"m-auto rounded-2 favorite-table-img",style:(0,r.j5)({backgroundImage:`url(${e.imageUrl})`})},null,4)]),(0,a._)("td",x,(0,r.zw)(e.title),1),(0,a._)("td",k,[e.price?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",D,"NTD "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)),e.price?((0,a.wg)(),(0,a.iD)("del",F,"NTD "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)):(0,a.kq)("",!0),e.price?((0,a.wg)(),(0,a.iD)("div",C,"NTD "+(0,r.zw)(t.$filters.currency(e.price)),1)):(0,a.kq)("",!0)]),(0,a._)("td",P,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary px-5",disabled:this.status.loadingItem===e.id,onClick:t=>W.addCart(e.id)},[this.status.loadingItem===e.id?((0,a.wg)(),(0,a.iD)("div",I,M)):(0,a.kq)("",!0),N,(0,a.Uk)(" Add To Cart ")],8,$)]),(0,a._)("td",S,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary px-4",onClick:t=>W.getProduct(e.id)},[T,(0,a.Uk)(" See More ")],8,q)]),(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:L.status.loadingItem===e.id,onClick:t=>W.removeFavorite(e)},j,8,U)])])))),128))])])])]),(0,a._)("div",z,[(0,a.Wm)(A,{class:"btn btn-primary ms-auto text-end hover-btn",to:"/cart"},{default:(0,a.w5)((()=>[(0,a.Uk)("Go To Cart"),H])),_:1})])],64)):((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",Y,[Z,(0,a.Wm)(A,{class:"btn btn-primary btn-lg fw-bold",to:"/products"},{default:(0,a.w5)((()=>[(0,a.Uk)("See More Products !")])),_:1})])]))])]),(0,a.Wm)(G)],64)}s(7658);var R=s(11),A=s(8186),G={components:{Navbar:R.Z,Footer:A.Z},data(){return{isLoading:!1,products:[],product:{},favoriteProduct:[],favoriteData:JSON.parse(localStorage.getItem("favorite"))||[],status:{loadingItem:""}}},inject:["emitter"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/funniecafe-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.getFavorite(),this.isLoading=!1})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},getProduct(t){this.$router.push(`/product/${t}`)},getFavorite(){this.favoriteProduct=this.products.filter((t=>-1!==this.favoriteData.indexOf(t.id)))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/funniecafe-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.$httpMessageState(t,"added to cart"),this.emitter.emit("update-cart"),this.status.loadingItem=""})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},removeFavorite(t){this.isLoading=!0,this.favoriteData.splice(this.favoriteData.indexOf(t.id),1),localStorage.setItem("favorite",JSON.stringify(this.favoriteData)),this.emitter.emit("update-favorite"),this.isLoading=!1,this.emitter.emit("push-message",{style:"secondary",title:"Removed From My Favorites"})}},mounted(){this.getFavorite(),this.emitter.on("update-favorite",(()=>{this.getFavorite()}))},unmounted(){this.emitter.off("update-favorite",this.getFavorite)},created(){this.getProducts()}},K=s(3744);const V=(0,K.Z)(G,[["render",J]]);var B=V}}]);
//# sourceMappingURL=449.72a67f8e.js.map